# Player Evaluation {#sec-playerEvaluation}

## Getting Started {#sec-playerEvaluationGettingStarted}

### Load Packages {#sec-playerEvaluationLoadPackages}

```{r}
library("tidyverse")
```

## Overview

Evaluating players for fantasy football could be thought of as similar to the process of evaluating companies when picking stocks to buy.
You want to evaluate and compare various assets so that you get the assets with the best value.

There are various domains of criteria we can consider when evaluating a football player's fantasy prospects.
Potential domains to consider include:

- athletic profile
- historical performance
- health
- age and career stage
- situational factors
- matchups
- cognitive and motivational factors
- fantasy value

The discussion that follows is based on my and others' *impressions* of some of the characteristics that may be valuable to consider when evaluating players.
However, the extent to which any factor is actually relevant for predicting future performance is an empirical question and should be evaluated empirically.

## Athletic Profile {#sec-evalAthleticProfile}

Factors related to a player's athletic profile include factors such as:

- body shape
    - height
    - weight
    - hand size
    - wing span (arm length)
- body function
    - agility
    - strength
    - speed
    - acceleration/explosiveness
    - jumping ability

In terms of body shape, we might consider a player's height, weight, hand size, and wing span (arm length).
Height allows players to see over opponents and to reach balls higher in the air.
Thus, greater height is particularly valuable for Quarterbacks and Wide Receivers.
Heavier players are tougher to budge and to tackle.
Greater weight is particularly valuable for Linemen, Fullbacks, and Tight Ends, but it can also be valuable—to a deree—for Quarterbacks, Running Backs, and Wide Receivers.
Hand size and wing span is particularly valuable for people catching the ball; thus, a larger hand size and longer wing span are particularly valuable for Wide Receivers and Tight Ends.

In terms of body function, we can consider a player's agility, strength, speed, acceleration/explosiveness, and jumping ability.
For Wide Receivers, speed, explosiveness, and jumping ability are particularly valuable.
For Running Backs, agility, strength, speed, and explosiveness are particularly valuable.

Many aspects of a player's athletic profile are available from the National Football League (NFL) Combine, which is especially relevant for evaluating rookies.
We demonstrate how to import data from the NFL Combine in Section @sec-combine.
There are also calculators that integrate information about body shape and information from the NFL Combine to determine a player's relative athletic score (RAS) for their position: <https://ras.football/ras-calculator/>

## Historical Performance {#sec-evalHistoricalPerformance}

> "The best predictor of future behavior is past behavior." – Unknown

> "Past performance does not guarantee future results." – A common disclaimer about investments.

Factors relating to historical performance to consider could include:

- performance in college
    - draft position
- performance in the NFL
- efficiency
- consistency

It is important to consider a player's past performance.
However, the extent to which historical performance may predict future performance may depend on many factors such as (a) the similarity of the prior situation to the current situation, (b) how long ago the prior situation was, and (c) the extent to which the player (or situation) has changed in the interim.
For rookies, the player does not have prior seasons of performance in the NFL to draw upon.
Thus, when evaluating rookies, it can be helpful to consider their performance in college or in their prior leagues.
However, there are large differences between the situation in college and the situation in the NFL, so prior success in college may not portend future success in the NFL.
An indicator that intends to be prognostic of future performance, and that accounts for past performance, is a player's draft position—that is, how early (or late) was a player selected in the NFL Draft.
The earlier a player was selected in the NFL Draft, the greater likelihood that the player will perform well.

For players who have played in the NFL, past performance becomes more relevant because, presumably, the prior situation is more similar (than was their situation in college) to their current situation.
Nevertheless, lots of things change from game to game and season to season: injuries, coaches, coaching strategies, teammates, etc.
So just because a player performed well or poorly in a given game or season does not necessarily mean that they will perform similarly in subsequent games/seasons.
Nevertheless, historical performance is one of the best indicators we have.

We demonstrate how to import historical player statistics in Section @sec-downloadActualStats.
We demonstrate how to calculate historical player statistics in Section @sec-calculateActualStats.
We demonstrate how to calculate historical fantasy points in Section @sec-calculateActualPoints.

In addition to how many fantasy points a player scores in terms of historical performance, we also care about efficiency and consistency.
How efficient were they given the number of opportunities they had?
If they were relatively more efficient, they will likely score more points than many of their peers when given more opportunities.
If they were relativelly inefficient, their capacity to score fantasy points may be more dependent on touches/opportunities.
Efficiency might be operationalized by indicators such as yards per passing attempt, yards per rushing attempt, yards per target, yards per reception, etc.

In terms of consistency, how consistent was the player they from game to game and from season to season?
For instance, we could examine the standard deviations of players' fantasy points across games in a given season.
However, the standard deviation tends to be upwardly biased as the mean increases.
So, we can account for the player's mean fantasy points per game by dividing their game-to-game standard deviation of fantasy points by their mean fantasy points across games.
This is known as the coefficient of variation (CV):

$$
CV = \frac{\sigma}{\mu}
$$

Players with a lower standard deviation and a lower coefficient of variation (of fantasy points across games) are more consistent.

[ADD EXAMPLE]

## Health {#sec-evalHealth}

Health-related factors to consider include:

- current injury status
- injury history

It is also important to consider a player's past and current health status.
In terms of a player's current health status, it is important to consider whether they are injured or are playing at less than 100% of their typical health.
In terms of a player's prior health status, one can consider their injury history, including the frequency and severity of injuries and their prognosis.

We demonstrate how to import injury reports in Section @sec-injuries.

## Age and Career Stage {#sec-evalAgeCareerStage}

Age and career stage-related factors include:

- age
- experience
- touches

A player's age is relevant because of important age-related changes in a player's speed, ability to recover from injury, etc.
A player's experience is relevant because players develop knowledge and skills with greater experience.
A player's prior touches/usage is also relevant, because it speaks to how many hits a player may have taken.
For players who take more hits, it may be more likely that their bodies "break down" sooner.

## Situational Factors {#sec-evalSituation}

Situational factors one could consider include:

- team quality
- role on team
- teammates
- opportunity and usage
    - snap count
    - touches/targets
    - red zone usage

Football is a team sport.
A player is embedded within a broader team context; it is important to consider the strength of their team context insofar as it may support— or detract from—a player's performance.
For instance, for a Quarterback, it is important to consider how strong the pass blocking is from the Offensive Line.
Will they have enough time to throw the ball, or will they be constantly under pressure to be sacked?
It is also important to consider the strength of the pass catchers—the Wide Receivers and Tight Ends.
For a Running Back, it is important to consider how strong the run blocking is from the Offensive Line.
For a Wide Receiver, it is important to consider how strong the pass blocking is, and how strong the Quarterback is.

It is also important to consider a player's role on the team.
Is the player a starter or a backup?
Related to this, it is important to consider the strength of one's teammates.
For a given Running Back, if a teammate is better at running the ball, this may take away from how much the player sees the field.
For a given Wide Receiver, if a teammate is better at catching the ball, this may take some targets away from the player.
However, the team's top defensive back is often matched up against the team's top Wide Receiver.
So, if the team's top Wide Receiver is matched up against a particularly strong Defensive Back, the second- and third-best Wide Receivers may more targets than usual.

It is also important to consider a player's opportunity and usage, which are influenced by many factors, including the skill of the player, the skill of their teammates, the role of the player on the team, the coaching style, the strategy of the opposing team, game scripts, etc.
In terms of the player's opportunity and usage, how many snaps do they get?
How many touches and/or targets do they receive?
Being on the field for more snaps and receiving more touches and/or targets means that the player has more opportunities to score fantasy points.
Are they targeted in the red zone?
Red zone targets are more likely to lead to touchdown scoring opportunities, which are particularly valuable in fantasy football.

## Matchups {#sec-evalMatchups}

Matchup-related factors to consider include:

- strength of schedule
- weekly matchup

Another aspect to consider is how challenging their matchup(s) and strength of schedule is.
For a Quarterback, it is valuable to consider how strong the oppenent's passing defense is.
For a Running Back, how strong is the running defense?
For a Wide Receiver, how strong is the passing defense and the Defensive Back that is likely to be assigned to guard them?

## Cognitive and Motivational Factors {#sec-evalCogMotivational}

Other factors to consider include cognitive and motivational factors.
Some coaches refer to these as the "X Factor" or "the intangibles."
However, just as any other construct in psychology, we can devise ways to operationalize them.

Cognitive and motivational factors one could consider include:

- reaction time
- knowledge and intelligence
- work ethic and mental toughness
- incentives
    - contract performance incentives
    - whether they are in a contract year

A player's knowledge, intelligence, and reaction time can help them gain an upper-hand even when they may not be the fastest or strongest.
A player's work ethic and mental toughness may help them be resilient and persevere in the face of challenges.
Contact-related incentives may lead a player to put forth greater effort.
For instance, a contract may have a performance incentive that provides a player greater compensation if they achieve a particular performance milestone (e.g., receiving yards).
Another potential incentive is if a player is in what is called their "contract year" (i.e., the last year of their current contract).
If a player is in the last year of their current contract, they have an incentive to perform well so they can get re-signed to a new contract.

## Fantasy Value {#sec-fantasyValue}

There are several sources that one can draw upon to evaluate a player's fantasy value:

- expert or aggregated rankings
- players' Average Draft Position (ADP) in other league drafts
- players' Average Auction Value (AAV) in other league drafts
- expert or aggregated projections

Fantasy rankings are provided by many sources.
[FantasyPros](https://www.fantasypros.com/nfl/rankings/consensus-cheatsheets.php) aggregates fantasy rankings across sources.
[Fantasy Football Analytics](https://fantasyfootballanalytics.net) creates fantasy rankings from projections that are aggregated across sources (see the webapp here: <https://apps.fantasyfootballanalytics.net>).

Average Draft Position (ADP) data are provided by [FantasyPros](https://www.fantasypros.com/nfl/adp/overall.php).
Average Auction Value (AAV) data are also provided by [FantasyPros](https://www.fantasypros.com/nfl/auction-values/calculator.php).

Projections that are aggregated across sources are provided by [Fantasy Football Analytics](https://fantasyfootballanalytics.net) (see the webapp here: <https://apps.fantasyfootballanalytics.net>) and by [FantasyPros](https://www.fantasypros.com/nfl/auction-values/calculator.php).

It is important to keep in mind that rankings, average draft position (ADP), and average auction values (AAV) are specific to roster and scoring settings of a particular league.
For instance, [DESCRIBE]
Thus, if using rankings, ADP, or AAV, it is important to find ones from leagues that mirror—as closely as possible—your league settings.

Projected statistics (e.g., projected passing touchdowns) are agnostic to league settings and can thus be used to generate league-specific fantasy projections and rankings.
Thus, projected statisitics may be more useful than rankings because they can be used to generate rankings for your particular league settings.
For instance, if you know how many touchdowns, yards, and interceptions a Quarterback is a projected to throw (in addition to any other relevant categories for the player, e.g., rushing yards and touchdowns), you can calculate how many fantasy points the Quarterback is expected to gain in your league (or in any league).
Thus, you can calculate ranking from projections, but you cannot reverse engineer projections from rankings.

There are many potential indices that can be worthwhile to consider, including a player's:

- dropoff
- value over replacement player (VORP)
- uncertainty

A player's *dropoff* is the difference between (a) the player's projected points and (b) the projected points of the next-best player at that position.

Because players from some positions (e.g., Quarterbacks) tend to score more points than players from other positions (e.g., Wide Receivers), it would be inadvisable to compare players across different positions based on projected points.
In order to more fairly compare players across positions, we can consider a player's value over a typical replacement player at that position (shortened to "value over replacement player").
A player's *value over a replacement player* (VORP) is the difference between (a) a player's projected fantasy points and (b) the fantasy points that you would be expected to get from a typical bench player at that position.
Thus, VORP provides an index of how much added value a player provides.

A player's *uncertainty* is how much variability there is in projections or rankings for a given player across sources.
For instance, consider a scenario where three experts provide ratings about two players, Player A and Player B.
Player A is projected to score 300, 310, and 290 points by experts 1, 2, and 3, respectively.
Player B is projected to score 400, 300, and 200 points by experts 1, 2, and 3, respectively.
In this case, both players are (on average) projected to score the same number of points (300).

```{r}
exampleData <- data.frame(
  player = c(rep("A", 3), rep("B", 3)),
  expert = c(1:3, 1:3),
  projectedPoints = c(300, 310, 290, 400, 300, 200)
)

playerA_mean <- mean(exampleData$projectedPoints[which(exampleData$player == "A")])
playerB_mean <- mean(exampleData$projectedPoints[which(exampleData$player == "B")])

playerA_mean
playerB_mean
```

However, the players differ considerably in their uncertainty (i.e., the source-to-source variability in their projections), as operationalized with the standard deviation and coefficient variation of projected points across sources for a given player.

```{r}
playerA_sd <- sd(exampleData$projectedPoints[which(exampleData$player == "A")])
playerb_sd <- sd(exampleData$projectedPoints[which(exampleData$player == "B")])

playerA_cv <- playerA_mean / playerA_sd
playerB_cv <- playerB_mean / playerb_sd

playerA_sd
playerb_sd

playerA_cv
playerB_cv
```

Here is a depiction of a density plot of projected points for a player with a low, medium, and high uncertainty:

```{r}
#| label: fig-playerUncertainty
#| fig-cap: "Density Plot of Projected Points for Three Players"

playerA <- rnorm(1000000, mean = 150, sd = 5)
playerB <- rnorm(1000000, mean = 150, sd = 15)
playerC <- rnorm(1000000, mean = 150, sd = 30)

mydata <- data.frame(playerA, playerB, playerC)

mydata_long <- mydata %>% 
  pivot_longer(
    cols = everything(),
    names_to = "player",
    values_to = "points"
  ) %>% 
  mutate(
    name = case_match(
      player,
      "playerA" ~ "Player A",
      "playerB" ~ "Player B",
      "playerC" ~ "Player C",
    )
  )

ggplot2::ggplot(
  data = mydata_long,
  ggplot2::aes(
    x = points,
    fill = name
  )
) +
  ggplot2::geom_density(alpha = .3) + 
  ggplot2::labs(
    x = "Players' Projected Points",
    title = "Density Plot of Projected Points for Three Players"
  ) +
  ggplot2::theme_classic() +
  ggplot2::theme(legend.title = element_blank())
```

Uncertainty is not necessarily a bad characteristic of a player's projected points.
It just means we have less confidence about how the player may be expected to perform.
Thus, players with greater uncertainty are risky and tend to have a higher upside (or ceiling) and a lower downside (or floor).

## Putting it Altogether {#sec-evalIntegration}

After performing an evaluation of the relevant domain(s) for a given player, then one must integrate the evaluation information across domains to make a judgment about a player's overall value.
When thinking about a player's value, it can be worth thinking of a player's upside and a player's downside.
Player that are more consistent may show higher downside but a lower upside.
Younger, less experienced players may show a higher upside but a lower downside.

The extent to which you prioritize a higher upside versus a higher downside may depend on many factors.
For instance, when drafting players, you may prioritize drafting players with the highest downside (i.e., the safest players), whereas you may draft sleepers (i.e., players with higher upside) for your bench.
When choosing which players to start in a given week, if you are predicted to beat a team handily, it may make sense to start the players with the highest downside.
By contrast, if you are predicted to lose to a team by a good margin, it may make sense to start the players with the highest upside.

# Mythbusters: Putting Fantasy Football Beliefs/Anecdotes to the Test {#sec-mythbusters}

## Getting Started {#sec-mythbustersGettingStarted}

### Load Packages {#sec-mythbustersLoadPackages}

```{r}
library("tidyverse")
```

### Load Data {#sec-mythbustersLoadData}

```{r}
load(file = "./data/nfl_playerContracts.RData")
load(file = "./data/nfl_pbp.RData")
```

```{r}
#| eval: false
#| include: false

load(file = file.path(path, "/OneDrive - University of Iowa/Teaching/Courses/Fantasy Football/Data/nfl_pbp.RData", fsep = ""))
```

## Do Players Score More Fantasy Points in their Contract Year? {#sec-contractYear}

```{r}
# Subset to remove players without a year signed
nfl_playerContracts_subset <- nfl_playerContracts %>% 
  dplyr::filter(!is.na(year_signed) & year_signed != 0)

# Determine the contract year for a given contract
nfl_playerContracts_subset$contractYear <- nfl_playerContracts_subset$year_signed + nfl_playerContracts_subset$years - 1

# Arrange contracts by player and year_signed
nfl_playerContracts_subset <- nfl_playerContracts_subset %>%
  dplyr::group_by(player, position) %>% 
  dplyr::arrange(player, position, -year_signed) %>% 
  dplyr::ungroup()

# Determine if the player played in the original contract year
nfl_playerContracts_subset <- nfl_playerContracts_subset %>%
  dplyr::group_by(player, position) %>%
  dplyr::mutate(
    next_contract_start = lag(year_signed)) %>%
  dplyr::ungroup() %>%
  dplyr::mutate(
    played_in_contract_year = ifelse(
      is.na(next_contract_start) | contractYear < next_contract_start,
      TRUE,
      FALSE))

# Check individual players
nfl_playerContracts_subset %>% 
  dplyr::filter(player == "Aaron Rodgers") %>% 
  dplyr::select(player:years, contractYear, next_contract_start, played_in_contract_year)

nfl_playerContracts_subset %>% 
  dplyr::filter(player %in% c("Jared Allen", "Aaron Rodgers")) %>% 
  dplyr::select(player:years, contractYear, next_contract_start, played_in_contract_year)

# Merge with seasonal fantasy points data
```

## Conclusion {#sec-mythbustersConclusion}

::: {.content-visible when-format="html"}

## Session Info {#sec-mythbustersSessionInfo}

```{r}
sessionInfo()
```

:::
